<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Events Page Guide for Review | Drew’s Big Fastpages Blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Events Page Guide for Review" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="By Drew Reed, Period 5 APCSP with Mr. Yeung. See the bottom of the Table of Contents for the raw code." />
<meta property="og:description" content="By Drew Reed, Period 5 APCSP with Mr. Yeung. See the bottom of the Table of Contents for the raw code." />
<link rel="canonical" href="https://drewreed2005.github.io/realdrew/guideforreviewevents/" />
<meta property="og:url" content="https://drewreed2005.github.io/realdrew/guideforreviewevents/" />
<meta property="og:site_name" content="Drew’s Big Fastpages Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-02-26T00:00:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Events Page Guide for Review" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-02-26T00:00:00-06:00","datePublished":"2023-02-26T00:00:00-06:00","description":"By Drew Reed, Period 5 APCSP with Mr. Yeung. See the bottom of the Table of Contents for the raw code.","headline":"Events Page Guide for Review","mainEntityOfPage":{"@type":"WebPage","@id":"https://drewreed2005.github.io/realdrew/guideforreviewevents/"},"url":"https://drewreed2005.github.io/realdrew/guideforreviewevents/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/realdrew/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://drewreed2005.github.io/realdrew/feed.xml" title="Drew's Big Fastpages Blog" /><link rel="shortcut icon" type="image/x-icon" href="/realdrew/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/realdrew/">Drew&#39;s Big Fastpages Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/realdrew/about/">About Me</a><a class="page-link" href="/realdrew/vocab/">Vocabulary</a><a class="page-link" href="/realdrew/notes/">Notes</a><a class="page-link" href="/realdrew/more/">Programs and More</a><a class="page-link" href="/realdrew/search/">Search</a><a class="page-link" href="/realdrew/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Events Page Guide for Review</h1><p class="page-description">By Drew Reed, Period 5 APCSP with Mr. Yeung. See the bottom of the Table of Contents for the raw code.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2023-02-26T00:00:00-06:00" itemprop="datePublished">
        Feb 26, 2023
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      19 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/drewreed2005/realdrew/tree/master/_notebooks/2023-02-26-guideforreview.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/realdrew/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/drewreed2005/realdrew/master?filepath=_notebooks%2F2023-02-26-guideforreview.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/realdrew/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/drewreed2005/realdrew/blob/master/_notebooks/2023-02-26-guideforreview.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/realdrew/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2Fdrewreed2005%2Frealdrew%2Fblob%2Fmaster%2F_notebooks%2F2023-02-26-guideforreview.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/realdrew/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#Full-Site-Link">Full Site Link </a></li>
<li class="toc-entry toc-h2"><a href="#Frontend-UI">Frontend UI </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Frontend-Validation">Frontend Validation </a></li>
<li class="toc-entry toc-h3"><a href="#Create,-Read-Options">Create, Read Options </a></li>
<li class="toc-entry toc-h3"><a href="#BONUS:-Delete-Option">BONUS: Delete Option </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Backend-Database">Backend Database </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Code-Quality-and-Comments">Code Quality and Comments </a></li>
<li class="toc-entry toc-h3"><a href="#Supporting-Create-and-Read">Supporting Create and Read </a></li>
<li class="toc-entry toc-h3"><a href="#API-GET-and-POST-Methods">API GET and POST Methods </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#BONUS:-Delete-Method">BONUS: Delete Method </a></li>
<li class="toc-entry toc-h2"><a href="#Raw-Code">Raw Code </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Frontend-Javascript-Code">Frontend Javascript Code </a></li>
<li class="toc-entry toc-h3"><a href="#Backend-Python-Code">Backend Python Code </a>
<ul>
<li class="toc-entry toc-h4"><a href="#Events-Model-Code">Events Model Code </a></li>
<li class="toc-entry toc-h4"><a href="#Events-API-File">Events API File </a></li>
</ul>
</li>
</ul>
</li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-02-26-guideforreview.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Full-Site-Link">
<a class="anchor" href="#Full-Site-Link" aria-hidden="true"><span class="octicon octicon-link"></span></a>Full Site Link<a class="anchor-link" href="#Full-Site-Link"> </a>
</h2>
<p>Please navigate the site <a href="https://drewreed2005.github.io/cafegato/events">linked here</a> to see these achievements first-hand.</p>
<h2 id="Frontend-UI">
<a class="anchor" href="#Frontend-UI" aria-hidden="true"><span class="octicon octicon-link"></span></a>Frontend UI<a class="anchor-link" href="#Frontend-UI"> </a>
</h2>
<p>The program contains validations for user inputs in both the frontend and the backend.</p>
<h3 id="Frontend-Validation">
<a class="anchor" href="#Frontend-Validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Frontend Validation<a class="anchor-link" href="#Frontend-Validation"> </a>
</h3>
<p>The validation in the frontend runs based on these conditions:</p>
<table>
  <tr>
    <th>Description</th>
    <th>Image</th>
  </tr>
  <tr>
    <td>All fields must be filled in.</td>
    <td><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%202.59.52%20PM.png" alt="Code segment shows list being formed" width="600"></td>
  </tr>
  <tr>
    <td>Name, email, event name and event details must all be less than 100 characters to prevent spam.</td>
    <td><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%202.57.24%20PM.png" alt="Code segment shows list being formed" width="600"></td>
  </tr>
  <tr>
    <td>The date inputted must be in the future, but cannot be more than a year in the future.</td>
    <td><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%203.00.38%20PM.png" alt="Code segment shows list being formed" width="600"></td>
  </tr>
  <tr>
    <td>The start and end time of the event must be during the open hours (listed on the "Hours" page).</td>
    <td><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%203.01.25%20PM.png" alt="Code segment shows list being formed" width="600"></td>
  </tr>
  <tr>
    <td>The event cannot last longer than 3 hours so that the events room isn't too booked all the time. They must be at least 15 minutes long.</td>
    <td><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%203.02.15%20PM.png" alt="Code segment shows list being formed" width="600"></td>
  </tr>
  <tr>
    <td>Name, email, event name, and password must not be duplicates.</td>
    <td><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%203.03.33%20PM.png" alt="Code segment shows list being formed" width="600"></td>
  </tr>
</table>
<p>Additionally, no more than five events can coincide within a time period at a time. There aren't that many events in the database, so producing an example alert would be difficult and essentially necessitate spam.</p>
<h3 id="Create,-Read-Options">
<a class="anchor" href="#Create,-Read-Options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create, Read Options<a class="anchor-link" href="#Create,-Read-Options"> </a>
</h3>
<p>The create (POST) option exists in the form of the input boxes that let you add an event.</p>
<figure><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%203.07.40%20PM.png" alt="Code segment shows list being formed" width="800"></figure><p>The read (GET) option is the table below it</p>
<figure><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%203.08.45%20PM.png" alt="Code segment shows list being formed" width="800"></figure><h3 id="BONUS:-Delete-Option">
<a class="anchor" href="#BONUS:-Delete-Option" aria-hidden="true"><span class="octicon octicon-link"></span></a>BONUS: Delete Option<a class="anchor-link" href="#BONUS:-Delete-Option"> </a>
</h3>
<p>Above the table, a set of input boxes to delete an event allow you to do so if you input the event name and password.</p>
<figure><img src="/realdrew/images/Screen%20Shot%202023-02-27%20at%203.10.08%20PM.png" alt="Code segment shows list being formed" width="500"></figure><h2 id="Backend-Database">
<a class="anchor" href="#Backend-Database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Backend Database<a class="anchor-link" href="#Backend-Database"> </a>
</h2>
<p>This section focuses on the backend code. You can use the table of contents at the top to skip to raw backend code.</p>
<h3 id="Code-Quality-and-Comments">
<a class="anchor" href="#Code-Quality-and-Comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code Quality and Comments<a class="anchor-link" href="#Code-Quality-and-Comments"> </a>
</h3>
<p>In order to really see this, skip to the "Raw Code -&gt; Backend Python Code". I put at least a few comments on every function and class.</p>
<h3 id="Supporting-Create-and-Read">
<a class="anchor" href="#Supporting-Create-and-Read" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supporting Create and Read<a class="anchor-link" href="#Supporting-Create-and-Read"> </a>
</h3>
<p>Below is the model code code.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And below this is the read code.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
            <span class="s2">"event_name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_name</span><span class="p">,</span>
            <span class="s2">"event_details"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_details</span><span class="p">,</span>
            <span class="s2">"date"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="s2">"start_time"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span>
            <span class="s2">"end_time"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span><span class="p">,</span>
            <span class="s2">"password"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span>
        <span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="API-GET-and-POST-Methods">
<a class="anchor" href="#API-GET-and-POST-Methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>API GET and POST Methods<a class="anchor-link" href="#API-GET-and-POST-Methods"> </a>
</h3>
<p>The POST method is seen below.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">class</span> <span class="nc">_Create</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">''' Read data for json body '''</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            
            <span class="sd">''' Avoid garbage in, error checking '''</span>
            <span class="c1"># validate name</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Submitter</span><span class="se">\'</span><span class="s1">s name is missing, or is less than 2 characters'</span><span class="p">},</span> <span class="mi">210</span>
            <span class="c1"># validate uid</span>
            <span class="n">email</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'email'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">email</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Email is missing, or is less than 2 characters'</span><span class="p">},</span> <span class="mi">210</span>
            <span class="c1"># look for the rest of the data</span>
            <span class="n">event_name</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'event_name'</span><span class="p">)</span>
            <span class="n">event_details</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'event_details'</span><span class="p">)</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">10</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">2023</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">2024</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Date is missing, formatted incorrectly, or within an invalid time range.'</span><span class="p">},</span> <span class="mi">210</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'start_time'</span><span class="p">)</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'end_time'</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'password'</span><span class="p">)</span>

            <span class="sd">''' #1: Key code block, setup USER OBJECT '''</span>
            <span class="n">eo</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                      <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
                      <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">,</span>
                      <span class="n">event_details</span><span class="o">=</span><span class="n">event_details</span><span class="p">,</span>
                      <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span>
                      <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
                      <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">,</span>
                      <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
            
            <span class="sd">''' #2: Key Code block to add user to database '''</span>
            <span class="c1"># create user in database</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">eo</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="c1"># success returns json of user</span>
            <span class="k">if</span> <span class="n">event</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="c1"># failure returns error</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Processed </span><span class="si">{</span><span class="n">event_name</span><span class="si">}</span><span class="s1">, either a format error or the event "</span><span class="si">{</span><span class="n">event_name</span><span class="si">}</span><span class="s1">" is a duplicate'</span><span class="p">},</span> <span class="mi">210</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And below this is the GET.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">class</span> <span class="nc">_Read</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">events</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>    <span class="c1"># read/extract all users from database</span>
            <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">]</span>  <span class="c1"># prepare output in json</span>
            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">json_ready</span><span class="p">)</span>  <span class="c1"># jsonify creates Flask response object, more specific to APIs than json.dumps</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="BONUS:-Delete-Method">
<a class="anchor" href="#BONUS:-Delete-Method" aria-hidden="true"><span class="octicon octicon-link"></span></a>BONUS: Delete Method<a class="anchor-link" href="#BONUS:-Delete-Method"> </a>
</h2>
<p>Below is the additional delete method, which has been connected to the frontend as shown above.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="k">class</span> <span class="nc">_Delete</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span> <span class="c1">#getting the database data for a given event</span>
            <span class="n">event_id</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span> <span class="c1">#isolating the ID of the given entry</span>
           
            <span class="n">status</span> <span class="o">=</span> <span class="n">deleteID</span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span> <span class="c1">#uses the deleteID function from the model</span>
            <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Successfully deleted event with id </span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s1"> '</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Event with id </span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s1"> not found'</span><span class="p">},</span> <span class="mi">240</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Raw-Code">
<a class="anchor" href="#Raw-Code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Raw Code<a class="anchor-link" href="#Raw-Code"> </a>
</h2>
<p>So that it is all accessible, I figured I would include all of the relevant files for my part of the project.</p>
<h3 id="Frontend-Javascript-Code">
<a class="anchor" href="#Frontend-Javascript-Code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Frontend Javascript Code<a class="anchor-link" href="#Frontend-Javascript-Code"> </a>
</h3>
<p>Here is all the code that goes into the frontend. See the comments throughout to understand what is being done and why.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="n">let</span> <span class="nb">sorted</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">var</span> <span class="n">pulldata</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

<span class="n">const</span> <span class="n">read_url</span> <span class="o">=</span> <span class="s2">"https://cgato.duckdns.org/api/events"</span><span class="p">;</span>
<span class="n">const</span> <span class="n">read_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span> <span class="o">//</span> <span class="o">*</span><span class="n">GET</span><span class="p">,</span> <span class="n">POST</span><span class="p">,</span> <span class="n">PUT</span><span class="p">,</span> <span class="n">DELETE</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span>
    <span class="n">mode</span><span class="p">:</span> <span class="s1">'cors'</span><span class="p">,</span> <span class="o">//</span> <span class="n">no</span><span class="o">-</span><span class="n">cors</span><span class="p">,</span> <span class="o">*</span><span class="n">cors</span><span class="p">,</span> <span class="n">same</span><span class="o">-</span><span class="n">origin</span>
    <span class="n">cache</span><span class="p">:</span> <span class="s1">'default'</span><span class="p">,</span> <span class="o">//</span> <span class="o">*</span><span class="n">default</span><span class="p">,</span> <span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="p">,</span> <span class="n">reload</span><span class="p">,</span> <span class="n">force</span><span class="o">-</span><span class="n">cache</span><span class="p">,</span> <span class="n">only</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="n">cached</span>
    <span class="n">credentials</span><span class="p">:</span> <span class="s1">'omit'</span><span class="p">,</span> <span class="o">//</span> <span class="n">include</span><span class="p">,</span> <span class="o">*</span><span class="n">same</span><span class="o">-</span><span class="n">origin</span><span class="p">,</span> <span class="n">omit</span>
    <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'application/json'</span>
    <span class="o">//</span> <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">};</span>
<span class="n">const</span> <span class="n">post_url</span> <span class="o">=</span> <span class="s2">"https://cgato.duckdns.org/api/events/create"</span><span class="p">;</span>
<span class="n">const</span> <span class="n">del_url</span> <span class="o">=</span> <span class="s2">"https://cgato.duckdns.org/api/events/delete"</span><span class="p">;</span>

<span class="n">const</span> <span class="n">table</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"evtablecont"</span><span class="p">);</span>

<span class="n">function</span> <span class="n">showEvTable</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">create_Table</span><span class="p">();</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'evlogbtn'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"display:none"</span><span class="p">;</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'logrefbtn'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"display:block"</span><span class="p">;</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'delControls'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"display:block"</span><span class="p">;</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'event_name_del'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"display:block"</span><span class="p">;</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'password_del'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"display:block"</span><span class="p">;</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'deletebtn'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"display:block"</span><span class="p">;</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'evtable'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"display:block"</span><span class="p">;</span>
    <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'filters'</span><span class="p">)</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s2">"font-size:25px;display:block"</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">time_Dif</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">hourdif</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">end</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">-</span> <span class="n">Number</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)));</span>
    <span class="n">var</span> <span class="n">mindif</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">end</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span> <span class="o">-</span> <span class="n">Number</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">));</span>
    <span class="k">return</span> <span class="n">hourdif</span> <span class="o">+</span> <span class="n">mindif</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">THIS</span> <span class="n">IS</span> <span class="n">A</span> <span class="n">PLACEHOLDER</span> <span class="n">FUNCTION</span> <span class="n">FOR</span> <span class="n">WHEN</span> <span class="n">THE</span> <span class="n">API</span> <span class="n">IS</span> <span class="n">RUNNING</span>
<span class="n">function</span> <span class="n">submit_Form</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">fetch</span><span class="p">(</span><span class="n">read_url</span><span class="p">,</span> <span class="n">read_options</span><span class="p">)</span>
            <span class="o">//</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">RESTful</span> <span class="s2">"promise"</span> <span class="n">on</span> <span class="nb">any</span> <span class="n">successful</span> <span class="n">fetch</span>
            <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">check</span> <span class="k">for</span> <span class="n">response</span> <span class="n">errors</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">const</span> <span class="n">errorMsg</span> <span class="o">=</span> <span class="s1">'Database response error: '</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">;</span>
                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">errorMsg</span><span class="p">);</span>
            <span class="p">};</span>
            <span class="o">//</span> <span class="n">valid</span> <span class="n">response</span> <span class="n">will</span> <span class="n">have</span> <span class="n">json</span> <span class="n">data</span>
            <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">var</span> <span class="n">form_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'email'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'event_name'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'event_details'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'start_time'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'end_time'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'password'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">];</span>
                <span class="o">//</span> <span class="k">for</span> <span class="n">loop</span> <span class="n">to</span> <span class="n">ensure</span> <span class="nb">all</span> <span class="n">fields</span> <span class="n">were</span> <span class="n">filled</span> <span class="ow">in</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">form_list</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">form_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. Make sure all fields are filled in."</span><span class="p">);</span>
                        <span class="k">return</span><span class="p">;</span>
                    <span class="p">};</span>
                <span class="p">};</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">form_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. Certain input fields have too many characters. Make sure that your name, email, event name, and details are all no more than 100 characters long. (This is a measure to prevent spam.)"</span><span class="p">)</span>
                        <span class="k">return</span><span class="p">;</span>
                    <span class="p">};</span>
                <span class="p">};</span>
                <span class="o">//</span> <span class="n">Defining</span> <span class="n">some</span> <span class="n">variables</span> <span class="k">for</span> <span class="n">validation</span>
                <span class="n">var</span> <span class="n">tempdate</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
                <span class="n">var</span> <span class="n">tempstime</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'start_time'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
                <span class="n">var</span> <span class="n">tempetime</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'end_time'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
                <span class="n">var</span> <span class="n">datefix</span> <span class="o">=</span> <span class="n">tempdate</span><span class="o">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="n">tempdate</span><span class="o">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="n">tempdate</span><span class="o">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
                <span class="n">const</span> <span class="n">hourdict</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">"open"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">:</span><span class="mi">18</span><span class="p">},</span> <span class="p">{</span><span class="s2">"open"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">:</span><span class="mi">17</span><span class="p">},</span> <span class="p">{</span><span class="s2">"open"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">:</span><span class="mi">17</span><span class="p">},</span> <span class="p">{</span><span class="s2">"open"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">:</span><span class="mi">17</span><span class="p">},</span> <span class="p">{</span><span class="s2">"open"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">:</span><span class="mi">17</span><span class="p">},</span> <span class="p">{</span><span class="s2">"open"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">:</span><span class="mi">17</span><span class="p">},</span> <span class="p">{</span><span class="s2">"open"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s2">"close"</span><span class="p">:</span><span class="mi">18</span><span class="p">}];</span>
                <span class="n">form_list</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">datefix</span><span class="p">;</span>
                <span class="n">var</span> <span class="n">fulldate</span> <span class="o">=</span> <span class="n">datefix</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">tempstime</span><span class="p">;</span>
                <span class="n">let</span> <span class="n">ev_date</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">fulldate</span><span class="p">);</span>
                <span class="n">let</span> <span class="n">cur_date</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">();</span>
                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ev_date</span><span class="p">,</span> <span class="n">cur_date</span><span class="p">);</span>
                <span class="n">let</span> <span class="n">ev_dow</span> <span class="o">=</span> <span class="n">ev_date</span><span class="o">.</span><span class="n">getDay</span><span class="p">()</span>
                <span class="o">//</span> <span class="n">validating</span> <span class="n">date</span>
                <span class="n">var</span> <span class="n">datedif</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">ev_date</span> <span class="o">-</span> <span class="n">cur_date</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">));</span>
                <span class="k">if</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">datedif</span> <span class="o">||</span> <span class="mi">365</span> <span class="o">&lt;</span> <span class="n">datedif</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. Make sure the date you have inputted is less than a year in the future."</span><span class="p">);</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="o">//</span> <span class="n">validating</span> <span class="n">day</span> <span class="n">of</span> <span class="n">the</span> <span class="n">week</span> <span class="n">considering</span> <span class="nb">open</span> <span class="n">hours</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">tempstime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">hourdict</span><span class="p">[</span><span class="n">ev_dow</span><span class="p">][</span><span class="s2">"open"</span><span class="p">]</span> <span class="o">||</span> <span class="n">Number</span><span class="p">(</span><span class="n">tempstime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">hourdict</span><span class="p">[</span><span class="n">ev_dow</span><span class="p">][</span><span class="s2">"close"</span><span class="p">])</span> <span class="p">{</span>
                    <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. It seems that your event starts before opening/after closing on "</span> <span class="o">+</span> <span class="n">datefix</span> <span class="o">+</span> <span class="s2">"."</span><span class="p">);</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">tempetime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">hourdict</span><span class="p">[</span><span class="n">ev_dow</span><span class="p">][</span><span class="s2">"open"</span><span class="p">]</span> <span class="o">||</span> <span class="n">Number</span><span class="p">(</span><span class="n">tempetime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&gt;</span> <span class="n">hourdict</span><span class="p">[</span><span class="n">ev_dow</span><span class="p">][</span><span class="s2">"close"</span><span class="p">])</span> <span class="p">{</span>
                    <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. It seems that your event ends before opening/after closing on "</span> <span class="o">+</span> <span class="n">datefix</span> <span class="o">+</span> <span class="s2">"."</span><span class="p">);</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="o">//</span> <span class="n">validating</span> <span class="n">event</span> <span class="n">duration</span> <span class="p">(</span><span class="n">must</span> <span class="n">be</span> <span class="n">at</span> <span class="n">least</span> <span class="mi">15</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">less</span> <span class="n">than</span> <span class="mi">3</span> <span class="n">hours</span><span class="p">,</span> <span class="n">start</span> <span class="n">must</span> <span class="n">be</span> <span class="n">before</span> <span class="n">end</span><span class="p">)</span>
                <span class="n">var</span> <span class="n">timedif</span> <span class="o">=</span> <span class="n">time_Dif</span><span class="p">(</span><span class="n">tempstime</span><span class="p">,</span> <span class="n">tempetime</span><span class="p">);</span> <span class="o">//</span><span class="ow">in</span> <span class="n">minutes</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">timedif</span> <span class="o">&lt;</span> <span class="mi">15</span> <span class="o">||</span> <span class="n">timedif</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. Make sure that your event lasts at least 15 minutes, but no more than 3 hours."</span><span class="p">)</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="o">//</span> <span class="n">validating</span> <span class="n">coincidence</span> <span class="ow">and</span> <span class="n">email</span>
                <span class="n">var</span> <span class="n">coinc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">data</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">temppull</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">temppull</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">==</span> <span class="n">datefix</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">tempstime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">Number</span><span class="p">(</span><span class="n">temppull</span><span class="p">[</span><span class="s1">'start_time'</span><span class="p">]</span><span class="o">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">Number</span><span class="p">(</span><span class="n">tempetime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">||</span> <span class="n">Number</span><span class="p">(</span><span class="n">tempstime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">Number</span><span class="p">(</span><span class="n">temppull</span><span class="p">[</span><span class="s1">'end_time'</span><span class="p">]</span><span class="o">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">Number</span><span class="p">(</span><span class="n">tempetime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span> <span class="p">{</span><span class="n">coinc</span> <span class="o">=</span> <span class="n">coinc</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;};</span>
                    <span class="p">};</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">temppull</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">==</span> <span class="n">form_list</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
                        <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. It seems that an event has already been created by that email. If someone has used your address to create an event without your consent, contact our staff."</span><span class="p">);</span>
                        <span class="k">return</span><span class="p">;</span>
                    <span class="p">};</span>
                <span class="p">};</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">coinc</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. Make sure that your event's timing does not coincide with the timing of more than five other events."</span><span class="p">);</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="o">//</span> <span class="k">if</span> <span class="nb">all</span> <span class="n">validations</span> <span class="n">successful</span>
                <span class="n">const</span> <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">"name"</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="s2">"email"</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'email'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="s2">"event_name"</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'event_name'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="s2">"event_details"</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'event_details'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="s2">"date"</span><span class="p">:</span> <span class="n">datefix</span><span class="p">,</span>
                    <span class="s2">"start_time"</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'start_time'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="s2">"end_time"</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'end_time'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="s2">"password"</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">'password'</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
                <span class="p">};</span>
                <span class="n">const</span> <span class="n">post_options</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
                    <span class="n">body</span><span class="p">:</span> <span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">body</span><span class="p">),</span>
                    <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
                        <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s1">'Bearer my-token'</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">};</span>
                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
                <span class="n">fetch</span><span class="p">(</span><span class="n">post_url</span><span class="p">,</span> <span class="n">post_options</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span>
                        <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
                            <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
                        <span class="p">})</span>
                    <span class="p">)</span>
                <span class="n">alert</span><span class="p">(</span><span class="s2">"Thank you, "</span> <span class="o">+</span> <span class="n">form_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">", for submitting an event! Watch your email for a confirmation message.</span><span class="se">\n\n</span><span class="s2">(Warning: Please do not submit two events at a time! Your events may end up being cancelled as a result.)"</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error processing your form. (Failed to send to/pull from the database, or there was an error in the formatting of your form. Make sure you're on unrestricted WiFi.)"</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">};</span>

<span class="o">//</span> <span class="n">prepare</span> <span class="n">HTML</span> <span class="n">result</span> <span class="n">container</span> <span class="k">for</span> <span class="n">new</span> <span class="n">output</span>
<span class="n">function</span> <span class="n">create_Table</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">fetch</span> <span class="n">the</span> <span class="n">API</span>
    <span class="n">fetch</span><span class="p">(</span><span class="n">read_url</span><span class="p">,</span> <span class="n">read_options</span><span class="p">)</span>
        <span class="o">//</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">RESTful</span> <span class="s2">"promise"</span> <span class="n">on</span> <span class="nb">any</span> <span class="n">successful</span> <span class="n">fetch</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">check</span> <span class="k">for</span> <span class="n">response</span> <span class="n">errors</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">const</span> <span class="n">errorMsg</span> <span class="o">=</span> <span class="s1">'Database response error: '</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">;</span>
            <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">errorMsg</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="o">//</span> <span class="n">valid</span> <span class="n">response</span> <span class="n">will</span> <span class="n">have</span> <span class="n">json</span> <span class="n">data</span>
        <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">data</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="n">table_Make</span><span class="p">(</span><span class="n">data</span><span class="p">)})</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="n">function</span> <span class="n">table_Make</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">table</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="nb">list</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">build</span> <span class="n">a</span> <span class="n">row</span> <span class="k">for</span> <span class="n">each</span> <span class="n">user</span>
            <span class="n">const</span> <span class="n">tr</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"tr"</span><span class="p">);</span>

            <span class="o">//</span> <span class="n">td</span><span class="s1">'s to build out each column of data</span>
            <span class="n">const</span> <span class="n">name</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"td"</span><span class="p">);</span>
            <span class="n">const</span> <span class="n">email</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"td"</span><span class="p">);</span>
            <span class="n">const</span> <span class="n">event_name</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"td"</span><span class="p">);</span>
            <span class="n">const</span> <span class="n">event_details</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"td"</span><span class="p">);</span>
            <span class="n">const</span> <span class="n">date</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"td"</span><span class="p">);</span>
            <span class="n">const</span> <span class="n">start_time</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"td"</span><span class="p">);</span>
            <span class="n">const</span> <span class="n">end_time</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">"td"</span><span class="p">);</span>
                
            <span class="o">//</span> <span class="nb">filter</span> <span class="n">times</span>
            <span class="n">var</span> <span class="n">temp_stime</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">start_time</span><span class="p">;</span>
            <span class="n">var</span> <span class="n">temp_etime</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">end_time</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">temp_stime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">var</span> <span class="n">temp_shr</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">temp_stime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">-</span> <span class="mi">12</span><span class="p">;</span>
                <span class="n">var</span> <span class="n">new_stime</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">temp_shr</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp_stime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" PM"</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">var</span> <span class="n">new_stime</span> <span class="o">=</span> <span class="n">temp_stime</span> <span class="o">+</span> <span class="s2">" AM"</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Number</span><span class="p">(</span><span class="n">temp_etime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">12</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">var</span> <span class="n">temp_ehr</span> <span class="o">=</span> <span class="n">Number</span><span class="p">(</span><span class="n">temp_etime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">-</span> <span class="mi">12</span><span class="p">;</span>
                <span class="n">var</span> <span class="n">new_etime</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">temp_ehr</span><span class="p">)</span> <span class="o">+</span> <span class="n">temp_etime</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" PM"</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">var</span> <span class="n">new_etime</span> <span class="o">=</span> <span class="n">temp_etime</span> <span class="o">+</span> <span class="s2">" AM"</span>
            <span class="p">}</span>

            <span class="o">//</span> <span class="n">add</span> <span class="n">content</span> <span class="kn">from</span> <span class="nn">user</span> <span class="n">data</span>          
            <span class="n">name</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">;</span> 
            <span class="n">email</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">;</span> 
            <span class="n">event_name</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">event_name</span><span class="p">;</span> 
            <span class="n">event_details</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">event_details</span><span class="p">;</span>
            <span class="n">date</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">date</span><span class="p">;</span> 
            <span class="n">start_time</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">new_stime</span><span class="p">;</span> 
            <span class="n">end_time</span><span class="o">.</span><span class="n">innerHTML</span> <span class="o">=</span> <span class="n">new_etime</span><span class="p">;</span>

            <span class="o">//</span> <span class="n">add</span> <span class="n">data</span> <span class="n">to</span> <span class="n">row</span>
            <span class="n">tr</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
            <span class="n">tr</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">email</span><span class="p">);</span>
            <span class="n">tr</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">event_name</span><span class="p">);</span>
            <span class="n">tr</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">event_details</span><span class="p">);</span>
            <span class="n">tr</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">date</span><span class="p">);</span>
            <span class="n">tr</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">start_time</span><span class="p">);</span>
            <span class="n">tr</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">end_time</span><span class="p">);</span>

            <span class="o">//</span> <span class="n">add</span> <span class="n">row</span> <span class="n">to</span> <span class="n">table</span>
            <span class="n">table</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="n">var</span> <span class="n">soonval</span> <span class="o">=</span> <span class="s2">"placeholder"</span><span class="p">;</span>
<span class="n">var</span> <span class="n">soon_fulldate</span> <span class="o">=</span> <span class="s2">"placeholder"</span><span class="p">;</span>
<span class="n">var</span> <span class="n">temp_soondate</span> <span class="o">=</span> <span class="s2">"placeholder"</span><span class="p">;</span>
<span class="n">var</span> <span class="n">lateval</span> <span class="o">=</span> <span class="s2">"placeholder"</span><span class="p">;</span>
<span class="n">var</span> <span class="n">late_fulldate</span> <span class="o">=</span> <span class="s2">"placeholder"</span><span class="p">;</span>
<span class="n">var</span> <span class="n">temp_latedate</span> <span class="o">=</span> <span class="s2">"placeholder"</span><span class="p">;</span>

<span class="n">function</span> <span class="n">sort_Events</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">orderval</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"timesort"</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
    <span class="n">var</span> <span class="n">monthval</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"monthfil"</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
    <span class="n">var</span> <span class="n">sorted_List</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="o">//</span> <span class="n">fetch</span> <span class="n">the</span> <span class="n">API</span>
    <span class="n">fetch</span><span class="p">(</span><span class="n">read_url</span><span class="p">,</span> <span class="n">read_options</span><span class="p">)</span>
        <span class="o">//</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">RESTful</span> <span class="s2">"promise"</span> <span class="n">on</span> <span class="nb">any</span> <span class="n">successful</span> <span class="n">fetch</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">check</span> <span class="k">for</span> <span class="n">response</span> <span class="n">errors</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">const</span> <span class="n">errorMsg</span> <span class="o">=</span> <span class="s1">'Database response error: '</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">;</span>
            <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">errorMsg</span><span class="p">);</span>
        <span class="p">};</span>
        <span class="o">//</span> <span class="n">valid</span> <span class="n">response</span> <span class="n">will</span> <span class="n">have</span> <span class="n">json</span> <span class="n">data</span>
        <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">var</span> <span class="n">testcopy</span> <span class="o">=</span> <span class="p">[</span><span class="o">...</span><span class="n">data</span><span class="p">];</span>
            <span class="n">var</span> <span class="n">d_length</span> <span class="o">=</span> <span class="n">testcopy</span><span class="o">.</span><span class="n">length</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">orderval</span> <span class="o">==</span> <span class="s2">"time_submitted"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">testcopy</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">event</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="n">sorted_List</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">event</span><span class="p">)});</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">orderval</span> <span class="o">==</span> <span class="s2">"soonest"</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">d_length</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="n">testcopy</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                            <span class="n">soon_fulldate</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">event</span><span class="p">[</span><span class="s1">'start_time'</span><span class="p">];</span>
                            <span class="n">temp_soondate</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">soon_fulldate</span><span class="p">);</span>
                            <span class="n">soonval</span> <span class="o">=</span> <span class="n">event</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="n">var</span> <span class="n">temp_fulldate</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">event</span><span class="p">[</span><span class="s1">'start_time'</span><span class="p">];</span>
                            <span class="n">var</span> <span class="n">temp_evdate</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">temp_fulldate</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">temp_evdate</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">temp_soondate</span><span class="o">.</span><span class="n">getTime</span><span class="p">())</span> <span class="p">{</span>
                                <span class="n">soon_fulldate</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="n">start_time</span><span class="p">;</span>
                                <span class="n">temp_soondate</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">soon_fulldate</span><span class="p">);</span>
                                <span class="n">soonval</span> <span class="o">=</span> <span class="n">event</span><span class="p">;</span>
                            <span class="p">};</span>
                        <span class="p">};</span>
                        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">});</span>
                    <span class="n">sorted_List</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">soonval</span><span class="p">);</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">testcopy</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">testcopy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">soonval</span><span class="p">)</span> <span class="p">{</span>
                            <span class="n">testcopy</span><span class="o">.</span><span class="n">splice</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                        <span class="p">};</span>
                    <span class="p">};</span>
                <span class="p">};</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">orderval</span> <span class="o">==</span> <span class="s2">"latest"</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">d_length</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="n">testcopy</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                            <span class="n">late_fulldate</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">event</span><span class="p">[</span><span class="s1">'start_time'</span><span class="p">];</span>
                            <span class="n">temp_latedate</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">late_fulldate</span><span class="p">);</span>
                            <span class="n">lateval</span> <span class="o">=</span> <span class="n">event</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="n">var</span> <span class="n">temp_fulldate</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">event</span><span class="p">[</span><span class="s1">'start_time'</span><span class="p">];</span>
                            <span class="n">var</span> <span class="n">temp_evdate</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">temp_fulldate</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">temp_evdate</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">temp_latedate</span><span class="o">.</span><span class="n">getTime</span><span class="p">())</span> <span class="p">{</span>
                                <span class="n">late_fulldate</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">date</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="n">start_time</span><span class="p">;</span>
                                <span class="n">temp_latedate</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(</span><span class="n">late_fulldate</span><span class="p">);</span>
                                <span class="n">lateval</span> <span class="o">=</span> <span class="n">event</span><span class="p">;</span>
                            <span class="p">};</span>
                        <span class="p">};</span>
                        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">});</span>
                    <span class="n">sorted_List</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">lateval</span><span class="p">);</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">testcopy</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">testcopy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">lateval</span><span class="p">)</span> <span class="p">{</span>
                            <span class="n">testcopy</span><span class="o">.</span><span class="n">splice</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                        <span class="p">};</span>
                    <span class="p">};</span>
                <span class="p">};</span>
            <span class="p">};</span>
            <span class="n">var</span> <span class="n">final_List</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">sorted_List</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">sorted_List</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s1">'date'</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">==</span> <span class="n">monthval</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">sorted_List</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s1">'date'</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">monthval</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span> <span class="p">{</span><span class="n">final_List</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">sorted_List</span><span class="p">[</span><span class="n">k</span><span class="p">])}</span> <span class="k">else</span> <span class="p">{};</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{};</span>
            <span class="p">};</span>
            <span class="n">table_Make</span><span class="p">(</span><span class="n">final_List</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="n">function</span> <span class="n">delete_Event</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">del_ename</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"event_name_del"</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
    <span class="n">var</span> <span class="n">del_password</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s2">"password_del"</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">;</span>
    <span class="n">var</span> <span class="n">success</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
    <span class="n">fetch</span><span class="p">(</span><span class="n">read_url</span><span class="p">,</span> <span class="n">read_options</span><span class="p">)</span>
        <span class="o">//</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">RESTful</span> <span class="s2">"promise"</span> <span class="n">on</span> <span class="nb">any</span> <span class="n">successful</span> <span class="n">fetch</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">check</span> <span class="k">for</span> <span class="n">response</span> <span class="n">errors</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">const</span> <span class="n">errorMsg</span> <span class="o">=</span> <span class="s1">'Database response error: '</span> <span class="o">+</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="p">;</span>
            <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">errorMsg</span><span class="p">);</span>
        <span class="p">};</span>
        <span class="o">//</span> <span class="n">valid</span> <span class="n">response</span> <span class="n">will</span> <span class="n">have</span> <span class="n">json</span> <span class="n">data</span>
        <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="n">data</span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">'event_name'</span><span class="p">]</span> <span class="o">==</span> <span class="n">del_ename</span> <span class="o">&amp;&amp;</span> <span class="n">event</span><span class="p">[</span><span class="s1">'password'</span><span class="p">]</span> <span class="o">==</span> <span class="n">del_password</span><span class="p">)</span> <span class="p">{</span>
                    <span class="o">//</span> <span class="k">if</span> <span class="nb">all</span> <span class="n">validations</span> <span class="n">successful</span>
                    <span class="n">const</span> <span class="n">del_ID</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">'id'</span><span class="p">];</span>
                    <span class="n">const</span> <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s1">'id'</span><span class="p">:</span><span class="n">del_ID</span>
                    <span class="p">};</span>
                    <span class="n">const</span> <span class="n">del_options</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="n">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
                        <span class="n">body</span><span class="p">:</span> <span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">body</span><span class="p">),</span>
                        <span class="n">headers</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
                            <span class="s1">'Authorization'</span><span class="p">:</span> <span class="s1">'Bearer my-token'</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">};</span>
                    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">body</span><span class="p">);</span>
                    <span class="n">fetch</span><span class="p">(</span><span class="n">del_url</span><span class="p">,</span> <span class="n">del_options</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">response</span> <span class="o">=&gt;</span>
                            <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
                                <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
                            <span class="p">})</span>
                        <span class="p">)</span>
                    <span class="n">alert</span><span class="p">(</span><span class="s1">'You have successfully deleted the event "'</span> <span class="o">+</span> <span class="n">event</span><span class="p">[</span><span class="s1">'event_name'</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'" from the events database.'</span><span class="p">);</span>
                    <span class="n">success</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">})</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">success</span> <span class="o">==</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span><span class="n">alert</span><span class="p">(</span><span class="s2">"There was an error in one of the two fields you have filled in. Make sure that your event name and password both match the case used when first created. (You can copy-paste the event name from the data below.)"</span><span class="p">)}</span>
        <span class="p">})</span>
    <span class="p">})</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Backend-Python-Code">
<a class="anchor" href="#Backend-Python-Code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Backend Python Code<a class="anchor-link" href="#Backend-Python-Code"> </a>
</h3>
<p>This is the code behind our backend server. It is primarily responsible for running the database we use.</p>
<h4 id="Events-Model-Code">
<a class="anchor" href="#Events-Model-Code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Events Model Code<a class="anchor-link" href="#Events-Model-Code"> </a>
</h4>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="sd">""" database dependencies to support sqliteDB examples """</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randrange</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">__init__</span> <span class="kn">import</span> <span class="n">app</span><span class="p">,</span> <span class="n">db</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>


<span class="sd">''' Tutorial: https://www.sqlalchemy.org/library.html#tutorials, try to get into Python shell and follow along '''</span>

<span class="c1"># Define the User class to manage actions in the 'users' table</span>
<span class="c1"># -- Object Relational Mapping (ORM) is the key concept of SQLAlchemy</span>
<span class="c1"># -- a.) db.Model is like an inner layer of the onion in ORM</span>
<span class="c1"># -- b.) User represents data we want to store, something that is built on db.Model</span>
<span class="c1"># -- c.) SQLAlchemy ORM is layer on top of SQLAlchemy Core, then SQLAlchemy engine, SQL</span>
<span class="k">class</span> <span class="nc">Event</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'events'</span>  <span class="c1"># table name is plural, class name is singular</span>

    <span class="c1"># Define the User schema with "vars" from object</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#_uid = db.Column(db.String(255), unique=True, nullable=False)</span>
    <span class="n">_email</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_event_name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_event_details</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_date</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_start_time</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_end_time</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># constructor of a User object, initializes the instance variables within object (self) </span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">event_name</span><span class="p">,</span> <span class="n">event_details</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_email</span> <span class="o">=</span> <span class="n">email</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_event_name</span> <span class="o">=</span> <span class="n">event_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_event_details</span> <span class="o">=</span> <span class="n">event_details</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_time</span> <span class="o">=</span> <span class="n">start_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_end_time</span> <span class="o">=</span> <span class="n">end_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">password</span>
    
    <span class="c1">#here's the name getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="c1">#here's the name setter</span>
    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    
    <span class="c1">#here's the email getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">email</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_email</span>
    
    <span class="c1">#here's the email setter</span>
    <span class="nd">@email</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_email</span> <span class="o">=</span> <span class="n">email</span>
    
    <span class="c1">#here's the event_name getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">event_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_name</span>
    
    <span class="c1">#here's the event_name setter</span>
    <span class="nd">@event_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">event_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_event_name</span> <span class="o">=</span> <span class="n">event_name</span>
    
    <span class="c1">#here's the event_details getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">event_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_details</span>
    
    <span class="c1">#here's the event_details setter</span>
    <span class="nd">@event_details</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">event_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_details</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_event_details</span> <span class="o">=</span> <span class="n">event_details</span>
    
    <span class="c1">#here's the date getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_date</span>
    
    <span class="c1">#here's the date setter</span>
    <span class="nd">@date</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_date</span> <span class="o">=</span> <span class="n">date</span>

    <span class="c1">#here's the start_time getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">start_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_time</span>
    
    <span class="c1">#here's the start_time setter</span>
    <span class="nd">@start_time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">start_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_time</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_time</span> <span class="o">=</span> <span class="n">start_time</span>

    <span class="c1">#here's the end_time getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">end_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end_time</span>
    
    <span class="c1">#here's the end_time setter</span>
    <span class="nd">@end_time</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">end_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">end_time</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_end_time</span> <span class="o">=</span> <span class="n">end_time</span>

    <span class="c1">#here's the password getter</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_password</span>
    
    <span class="c1">#here's the password setter</span>
    <span class="nd">@password</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">password</span>
    
    <span class="c1"># output content using str(object) in human readable form, uses getter</span>
    <span class="c1"># output content using json dumps, this is ready for API response</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># CRUD create/add a new record to the table</span>
    <span class="c1"># returns self or None on error</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"email"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
            <span class="s2">"event_name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_name</span><span class="p">,</span>
            <span class="s2">"event_details"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_details</span><span class="p">,</span>
            <span class="s2">"date"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="s2">"start_time"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span>
            <span class="s2">"end_time"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span><span class="p">,</span>
            <span class="s2">"password"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span>
        <span class="p">}</span>

    <span class="c1"># CRUD update: updates user name, password, phone</span>
    <span class="c1"># returns self</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">event_name</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">event_details</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">end_time</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
        <span class="sd">"""only updates values with length"""</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">event_name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_name</span> <span class="o">=</span> <span class="n">event_name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">event_details</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_details</span> <span class="o">=</span> <span class="n">event_details</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">=</span> <span class="n">start_time</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_time</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">=</span> <span class="n">end_time</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># CRUD delete: remove self</span>
    <span class="c1"># None</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>


<span class="sd">"""Database Creation and Testing """</span>


<span class="c1"># Builds working data for testing</span>
<span class="k">def</span> <span class="nf">initEvents</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="sd">"""Create database and tables"""</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
        <span class="sd">"""Tester data for table</span>
<span class="sd">        e1 = Event(name="Thomas Edison", email="tedison@lightbulb.edu",</span>
<span class="sd">            event_name="The Edison Troupe Meet",</span>
<span class="sd">            event_details="We 10 selected geniuses will meet in the events room for a convergence.",</span>
<span class="sd">            date="02/23/2023", start_time="13:00", end_time="14:00", password="tedisonrules20")</span>
<span class="sd">        e2 = Event(name="John Mortensen", email="jmortensen@powayusd.com",</span>
<span class="sd">            event_name="Extra Credit Code Meetup",</span>
<span class="sd">            event_details="Come to work on ideation and any confusion with the Full Stack CPT project. No phones.",</span>
<span class="sd">            date="02/25/2023", start_time="10:00", end_time="12:00", password="codec0decod3bro")</span>
<span class="sd">        e3 = Event(name="Karl Giant", email="giantrichguy@wallstreet.org",</span>
<span class="sd">            event_name="Karl and Cats",</span>
<span class="sd">            event_details="Karl would like to see cats with friends (if he can fit in the building).",</span>
<span class="sd">            date="02/26/2023", start_time="16:00", end_time="17:00", password="i_am-the-f4th3r")</span>
<span class="sd">        </span>
<span class="sd">        events = [e1, e2, e3]</span>

<span class="sd">        #Builds sample events data</span>
<span class="sd">        for event in events:</span>
<span class="sd">            try:</span>
<span class="sd">                event.create()</span>
<span class="sd">            except IntegrityError:</span>
<span class="sd">                '''fails with bad or duplicate data'''</span>
<span class="sd">                db.session.remove()</span>
<span class="sd">                print(f"Records exist, duplicate data, or error: {event.event_name}")</span>
<span class="sd">        """</span>

<span class="k">def</span> <span class="nf">deleteID</span><span class="p">(</span><span class="n">event_id</span><span class="p">):</span>                
    <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span> <span class="c1">#getting an event from the database based on ID</span>

    <span class="c1">#user = Wordle.query.filter_by(name=name).first()</span>
    <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Query 1:"</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> <span class="c1">#prints the one query if it finds one</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="c1">#deletes the event with the db.session innate function</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span> <span class="c1">#commits the change</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"event "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span><span class="o">+</span><span class="s2">" not found"</span><span class="p">)</span> <span class="c1">#if the event isn't found, the display is provided</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Events-API-File">
<a class="anchor" href="#Events-API-File" aria-hidden="true"><span class="octicon octicon-link"></span></a>Events API File<a class="anchor-link" href="#Events-API-File"> </a>
</h4>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-python"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">Blueprint</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span> <span class="c1"># used for REST API building</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">flask_cors</span> <span class="kn">import</span> <span class="n">CORS</span>

<span class="kn">from</span> <span class="nn">model.events</span> <span class="kn">import</span> <span class="n">Event</span><span class="p">,</span> <span class="n">deleteID</span>

<span class="n">event_api</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">'event_api'</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">,</span>
                   <span class="n">url_prefix</span><span class="o">=</span><span class="s1">'/api/events'</span><span class="p">)</span>

<span class="c1"># API docs https://flask-restful.readthedocs.io/en/latest/api.html</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">Api</span><span class="p">(</span><span class="n">event_api</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">EventAPI</span><span class="p">:</span>        
    <span class="k">class</span> <span class="nc">_Create</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">''' Read data for json body '''</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            
            <span class="sd">''' Avoid garbage in, error checking '''</span>
            <span class="c1"># validate name</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Submitter</span><span class="se">\'</span><span class="s1">s name is missing, or is less than 2 characters'</span><span class="p">},</span> <span class="mi">210</span>
            <span class="c1"># validate uid</span>
            <span class="n">email</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'email'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">email</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Email is missing, or is less than 2 characters'</span><span class="p">},</span> <span class="mi">210</span>
            <span class="c1"># look for the rest of the data</span>
            <span class="n">event_name</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'event_name'</span><span class="p">)</span>
            <span class="n">event_details</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'event_details'</span><span class="p">)</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'date'</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">10</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">2023</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">date</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">2024</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Date is missing, formatted incorrectly, or within an invalid time range.'</span><span class="p">},</span> <span class="mi">210</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'start_time'</span><span class="p">)</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'end_time'</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'password'</span><span class="p">)</span>

            <span class="sd">''' #1: Key code block, setup USER OBJECT '''</span>
            <span class="n">eo</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                      <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
                      <span class="n">event_name</span><span class="o">=</span><span class="n">event_name</span><span class="p">,</span>
                      <span class="n">event_details</span><span class="o">=</span><span class="n">event_details</span><span class="p">,</span>
                      <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span>
                      <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
                      <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">,</span>
                      <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
            
            <span class="sd">''' #2: Key Code block to add user to database '''</span>
            <span class="c1"># create user in database</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">eo</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="c1"># success returns json of user</span>
            <span class="k">if</span> <span class="n">event</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="c1"># failure returns error</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Processed </span><span class="si">{</span><span class="n">event_name</span><span class="si">}</span><span class="s1">, either a format error or the event "</span><span class="si">{</span><span class="n">event_name</span><span class="si">}</span><span class="s1">" is a duplicate'</span><span class="p">},</span> <span class="mi">210</span>

    <span class="k">class</span> <span class="nc">_Read</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">events</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>    <span class="c1"># read/extract all users from database</span>
            <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">]</span>  <span class="c1"># prepare output in json</span>
            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">json_ready</span><span class="p">)</span>  <span class="c1"># jsonify creates Flask response object, more specific to APIs than json.dumps</span>
    
    <span class="k">class</span> <span class="nc">_Delete</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span> <span class="c1">#getting the database data for a given event</span>
            <span class="n">event_id</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span> <span class="c1">#isolating the ID of the given entry</span>
           
            <span class="n">status</span> <span class="o">=</span> <span class="n">deleteID</span><span class="p">(</span><span class="n">event_id</span><span class="p">)</span> <span class="c1">#uses the deleteID function from the model</span>
            <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Successfully deleted event with id </span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s1"> '</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="sa">f</span><span class="s1">'Event with id </span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s1"> not found'</span><span class="p">},</span> <span class="mi">240</span>

    <span class="c1"># building RESTapi endpoint</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">_Create</span><span class="p">,</span> <span class="s1">'/create'</span><span class="p">)</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">_Read</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">)</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">_Delete</span><span class="p">,</span> <span class="s1">'/delete'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/realdrew/guideforreviewevents/" hidden></a>
</article>

<script src="https://utteranc.es/client.js"
        repo="[ENTER REPO HERE]"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/realdrew/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://drewreed2005.github.io/realdrew/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/realdrew/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Documentation of my constant progress toward being a master coder (haiyah).</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://github.com/nighthawkcoders" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/realdrew/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/NighthawkCoding" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/realdrew/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.youtube.com/channel/UClIKOsDS5dsfzFA3zveDT3Q" target="_blank" title="youtube">
    <svg class="svg-icon grey">
      <use xlink:href="/realdrew/assets/minima-social-icons.svg#youtube"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
